<div class="myCart-box">
  <div class="offer box">
    <div class="grid grid-cols-3 md:grid-cols-3 gap-4">

      <!-- First Column: Selected Items -->
      <div class="sel-items col-span-1">
        <div class="title">
          <h3>Selected Items</h3>
        </div>
        <div *ngFor="let category of cartData.products; let cIndex = index">
          <div *ngFor="let brandCategory of category; let bIndex = index">
            <div *ngFor="let product of brandCategory; let pIndex = index" class="p-box">
              <div class="img-box">
                <ng-container *ngIf="getPaintBrandKey(product) as paintKey">
                  <ng-container [ngSwitch]="paintKey">
                    <img *ngSwitchCase="'BERGER_PAINTS'" src="../../../assets/images/berger 5.png" alt="Berger" />
                    <img *ngSwitchCase="'ASIAN_PAINTS'" src="../../../assets/images/asian paints 1.png"
                      alt="Asian Paints" />
                    <img *ngSwitchCase="'JN_PAINTS'" src="../../../assets/images/jenson 1.png" alt="Jenson" />
                    <img *ngSwitchDefault src="../../../assets/images/default.png" alt="Default Image" />
                  </ng-container>
                </ng-container>
              </div>
              <div class="p-details">
                <h4>{{ product.JN_PAINTS || product.BERGER_PAINTS || product.ASIAN_PAINTS }}</h4>
                <div
                  *ngFor="let detail of product.JN_details || product.BERGER_details || product.ASIAN_details; let dIndex = index">
                  <h4>{{ detail.pack }}</h4>
                  <p>₹{{ detail.price || 'N/A' }}</p>
                  <label>Quantity:
                    <!-- <input type="number" [(ngModel)]="detail.quantity" min="1" max="100" /> -->
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Second Column: Compare Brands -->
      <div class="brand-item col-span-1">
        <div class="content">
          <select [(ngModel)]="selectedBrand" (change)="onBrandChange()"
            class="block w-full p-2 border border-gray-300 rounded-md">
            <option value="Asian">Asian Paints</option>
            <option value="Berger">Berger</option>
            <option value="JN">Jenson & Nicholson</option>
            <option value="Sheenlac">Sheenlac</option>
          </select>
          <div class="p-box" *ngIf="products && products.length > 0">
            <div class="hover-me">
              <p>Switch</p>
            </div>
            <div class="img-box">
              <img src="../../../assets/products/{{products[0].materialCode}}.png" alt="Asian Paints" />
            </div>
            <!-- <div class="p-details">
              <h4>Apex Ultima</h4>
              <div class="flex items-center gap-[5px] font-[600] text-[20px]">
                <p>₹5,999</p>
                <span style="text-decoration: line-through" class="text-gray-400 text-[16px]">₹4,999</span>
              </div>
            </div> -->
            <div class="p-details">
              <h4>{{ products[0].brand }}</h4> <!-- Dynamically displays the product brand -->

              <div class="flex items-center gap-[5px] font-[600] text-[20px]">
                <p>₹{{ products[0].details[0]?.price || 0 }}</p> <!-- Dynamically displays the price -->
                <span style="text-decoration: line-through" class="text-gray-400 text-[16px]">
                  ₹{{ products[0].details[0]?.originalPrice || 0 }} <!-- Dynamically displays the original price -->
                </span>
              </div>
            </div>

          </div>
        </div>
      </div>

      <!-- Third Column: My Cart -->
      <div class="sel-items col-span-1">
        <div class="title">
          <h3>My Cart ({{cartLength}})</h3>
        </div>
        <div *ngFor="let category of cartData.products; let cIndex = index">
          <div *ngFor="let brandCategory of category; let bIndex = index">
            <div *ngFor="let product of brandCategory; let pIndex = index" class="p-box">
              <div class="img-box">
                <ng-container *ngIf="getPaintBrandKey(product) as paintKey">
                  <ng-container [ngSwitch]="paintKey">
                    <img *ngSwitchCase="'BERGER_PAINTS'" src="../../../assets/images/berger 5.png" alt="Berger" />
                    <img *ngSwitchCase="'ASIAN_PAINTS'" src="../../../assets/images/asian paints 1.png"
                      alt="Asian Paints" />
                    <img *ngSwitchCase="'JN_PAINTS'" src="../../../assets/images/jenson 1.png" alt="Jenson" />
                    <img *ngSwitchDefault src="../../../assets/images/default.png" alt="Default Image" />
                  </ng-container>
                </ng-container>
              </div>
              <div class="p-details">
                <h4>{{ product.JN_PAINTS || product.BERGER_PAINTS || product.ASIAN_PAINTS }}</h4>
                <div
                  *ngFor="let detail of product.JN_details || product.BERGER_details || product.ASIAN_details; let dIndex = index">
                  <h4>{{ detail.pack }}</h4>
                  <p>₹{{ detail.price || 'N/A' }}</p>
                  <label>Quantity:
                    <!-- <input type="number" [(ngModel)]="detail.quantity" min="1" max="100" /> -->
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div> <!-- End of sep-2 -->

    <div class="total">
      <h2>Total: ₹{{ total.toFixed(2) || 0 }}</h2>
    </div>
  </div> <!-- End of offer -->
</div> <!-- End of myCart-box -->

<div class="h-[80px] flex w-full items-center justify-end pr-[20px]">
  <button (click)="cartCreation()" style="margin: 0; width: auto" class="bttn">
    Submit
  </button>
</div>